
As with any kind of development, it’s good practice to add tests to your package. There are three things you must do to set up tests on your package:

1. Create the C# test files and put them under the Tests folder.
2. Create asmdef files for your tests.
3. Enable tests for your package.

  
与任何类型的开发一样，向包中添加测试是一种很好的做法。要对您的包设置测试，您必须执行三件事：
1. 创建 C# 测试文件并将它们放在 Tests 文件夹下。
2. 为您的测试创建 asmdef 文件。
3. 为您的包启用测试。

---


## Location of test files

You can add your test files to the Tests folder of your package in the Editor and Runtime subfolders. For example, a simple package with tests might look something like this:

您可以将测试文件添加到包的 Tests 文件夹中的 Editor 和 Runtime 子文件夹中。例如，带有测试的简单包可能如下所示：

```
<package-root>
  ├── package.json
  ├── Editor
  │     ├── <company-name>.<package-name>.Editor.asmdef
  │     └── EditorExample.cs
  ├── Runtime
  │     ├── <company-name>.<package-name>.asmdef
  │     └── RuntimeExample.cs
  └── Tests
        ├── Editor
        │    ├── <company-name>.<package-name>.Editor.Tests.asmdef
        │    └── EditorExampleTest.cs
        └── Runtime
             ├── <company-name>.<package-name>.Tests.asmdef
             └── RuntimeExampleTest.cs
```


Each of those subfolders must contain an .asmdef file, which provides references to the Editor and Runtime assemblies. The assembly definition files also provide a reference to the test assembly files. For more information, refer to Assembly definition files for tests.

每个子文件夹都必须包含一个 .asmdef 文件，该文件提供对编辑器和运行时程序集的引用。程序集定义文件还提供对测试程序集文件的引用。有关更多信息，请参阅用于测试的程序集定义文件。


---


## Assembly definition files for tests

Use the Test Framework package to create or edit your assembly definition files. For more information, refer to Creating test assemblies.

Although you can choose to edit assembly definition files directly, you need to make sure to add the following references:

使用测试框架包创建或编辑程序集定义文件。有关更多信息，请参阅创建测试程序集。

尽管您可以选择直接编辑程序集定义文件，但您需要确保添加以下引用：

| **Attribute**               | **Type**         | **Description**                                                                                                                                                                                                                                                                                                                                                                                                             |
| --------------------------- | ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **name**                    | String           | The name of the assembly without the file extension.<br><br>不带文件扩展名的程序集名称。                                                                                                                                                                                                                                                                                                                                                  |
| **references**              | Array of Strings | References to the Editor and Runtime assemblies. Assembly definition files require different references, depending on the test type:  <br>- For Editor tests, add a reference to the package’s Editor and Runtime assemblies.  <br>- For Runtime tests, add a reference to the package’s Runtime assembly only.<br><br>对编辑器和运行时程序集的引用。根据测试类型，程序集定义文件需要不同的引用：<br>- 对于编辑器测试，添加对包的编辑器和运行时程序集的引用。<br>- 对于运行时测试，仅添加对包的运行时程序集的引用。 |
| **optionalUnityReferences** | Array of Strings | This list of Unity references must include `"TestAssemblies"` to mark the assembly as a test assembly. This adds references to the `nunit.framework.dll` and `UnityEngine.TestRunner.dll` libraries to the Assembly Definition.<br><br>此 Unity 引用列表必须包含“TestAssemblies”以将该程序集标记为测试程序集。这将对 nunit.framework.dll 和 UnityEngine.TestRunner.dll 库的引用添加到程序集定义中。                                                                   |
| **includePlatforms**        | Array of Strings | For the Editor test, this list of platforms must include the `"Editor"` platform.<br><br>对于编辑器测试，此平台列表必须包含“编辑器”平台。                                                                                                                                                                                                                                                                                                          |

Tip: You can also edit the assembly definition files in the Inspector. Refer to Assembly Definitions for more information.

提示：您还可以在检查器中编辑装配体定义文件。有关详细信息，请参阅程序集定义。


---


### Editor file example

The editor test `.asmdef` file looks like this:

编辑器测试 .asmdef 文件如下所示：

```json
{
  "name": "MyCompany.MyPackage.Editor.Tests",
  "references": [
    "MyPackage.Editor",
    "MyPackage"
  ],
  "optionalUnityReferences": [
    "TestAssemblies"
  ],
  "includePlatforms": [
    "Editor"
  ],
  "excludePlatforms": []
}
```


---


### Runtime file example

The runtime test `.asmdef` file looks like this:

运行时测试 .asmdef 文件如下所示：

```json
{
  "name": "MyCompany.MyPackage.Tests",
  "references": [
    "MyPackage"
  ],
  "optionalUnityReferences": [
    "TestAssemblies"
  ],
  "includePlatforms": [],
  "excludePlatforms": []
}
```


---

## Enabling tests for a package

For embedded packages, you don’t need to explicitly enable tests because embedded packages are in development.

However, for other types of dependencies, you need to add the testables attribute to the Project manifest and add the names of packages that have tests you want to run. That includes direct and indirect dependencies of the Project. For example:

This example adds tests for the com.unity.some-package and com.unity.other-package packages in Unity’s Test Framework package.

Note: You might need to import the package again, because the test framework doesn’t always immediately pick up changes to the testables attribute.


对于嵌入式软件包，您不需要显式启用测试，因为嵌入式软件包正在开发中。

但是，对于其他类型的依赖项，您需要将 testables 属性添加到项目清单中，并添加包含要运行的测试的包的名称。这包括项目的直接和间接依赖关系。例如：

此示例在 Unity 的测试框架包中添加了 com.unity.some-package 和 com.unity.other-package 包的测试。

注意：您可能需要再次导入包，因为测试框架并不总是立即获取对 testables 属性的更改。

---